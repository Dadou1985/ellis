<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ellis Electric</title>

    <!--<script src="asset/js/index.js"></script>-->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="asset/css/index.css">
</head>
<body>
    <header>
        <div class="jumbotron fx col jccenter">
            <h1 class="display-4 txtAlignCenter">Convertir ma flotte en électrique</h1>
            <p class="lead txtAlignCenter">Faites des économies, passez à l'électrique !</p>
            <div class="dropdown fx jccenter">
                <div class="dropdown-menu percent50" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">Action</a>
                  <a class="dropdown-item" href="#">Another action</a>
                  <a class="dropdown-item" href="#">Something else here</a>
                </div>
              </div>
          </div>
    </header>
    <section>
        <div class="fx row jcaround percent100">
            <div class="dropdown fx jccenter">
                <button class="btn btn-primary btn-lg btn-block dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Choisir un véhicule
                </button>
                <div class="dropdown-menu percent100" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">Action</a>
                  <a class="dropdown-item" href="#">Another action</a>
                  <a class="dropdown-item" href="#">Something else here</a>
                </div>
              </div>
              <div class="dropdown fx jccenter">
                <button class="btn btn-success btn-lg btn-block dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Choisir un véhicule
                </button>
                <div class="dropdown-menu percent100" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">Action</a>
                  <a class="dropdown-item" href="#">Another action</a>
                  <a class="dropdown-item" href="#">Something else here</a>
                </div>
              </div>
        </div>
        <div id="test"></div>
            <script>
    
                function drawCircle(idContainer, widthContainer, heightContainer, colorContainer, circleHorizontalPosition, circleVerticalPosition, circleRadius, circleStrokeWidth, circleStroke, circleFill, backgroundColor, circleTitle, circleText, circleText2, circleText3) {

                    const svg = d3.select(idContainer).append("svg")
                        .attr("width", widthContainer)
                        .attr("height", heightContainer)
                        .style("color", colorContainer)

                    svg.append("circle")
                        .attr("cx", circleHorizontalPosition)
                        .attr("cy", circleVerticalPosition)
                        .attr("r", circleRadius)
                        .style("stroke-width", circleStrokeWidth)
                        .style("stroke", circleStroke)
                        .style("fill", circleFill)
                        .on("mouseover", function(){
                            svg.select("circle").style("fill", circleStroke)
                            svg.selectAll("text").style("fill", backgroundColor)
                        })
                        .on("mouseleave", function(){
                            svg.selectAll("circle").style("fill", "none")
                            svg.selectAll("text").style("fill", circleStroke)
                        })
    
                    svg.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition)
                        .text(circleTitle)
                        .attr("text-anchor", "middle")
                        .style("fill", circleStroke)
                        .style("font-size", "3em")
                        
                    svg.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition * 1.2)
                        .text(circleText)
                        .attr("text-anchor", "middle")
                        .style("fill", circleStroke)
                        .style("font-size", "2em")
                    
                    svg.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition * 1.4)
                        .text(circleText2)
                        .attr("text-anchor", "middle")
                        .style("fill", circleStroke)
                        .style("font-size", "2em")
    
                    svg.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition * 1.6)
                        .text(circleText3)
                        .attr("text-anchor", "middle")
                        .style("fill", circleStroke)
                        .style("font-size", "2em")


                }

                const fuelCar = drawCircle("#test", "40%", 500, "white", "270", "250", "45%", 3, "blue", "none", "181818", "Renault Captur", "Essence", "210 000km", "Année 2013") 
                const electricCar = drawCircle("#test", "40%", 500, "white", "270", "250", "45%", 3, "green", "none", "181818", "Tesla Model S", "50 000€", "Autonomie de 505km", "")

                /*const fuelCar = drawCircle("#test", "40%", 500, "white", "50%", "50%", "35%", 3, "blue", "none", "181818", "https://cdn.drivek.it/configurator-covermobile/cars/fr/500/RENAULT/CAPTUR/38975_SUV-5-DOORS/renault-captur-2019-mobile.jpg", "30%", "30%", "Renault Captur", "Essence", "210 000km", "Année 2013") 
                const electricCar = drawCircle("#test", "40%", 500, "white", "50%", "250", "35%", 3, "green", "none", "181818", "https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ37m8X0Urzm4J30YgAKqwYWyfzZM99g76L-0XCRAoIH3oOh06n", "40%", "40%", "Tesla Model S", "50 000€", "Autonomie de 505km", "")
*/
                function pieChart(idContainer, widthContainer, heightContainer, colorContainer, pieWidth, pieHeight, pieMargin, pieHorizontalPosition, pieVerticalPosition, pieTitleHorizontalPosition, pieTitleVerticalPosition, pieTitle, pieFill, pieTitleSize, pieTitleHorizontalPosition2, pieTitleVerticalPosition2, pieTitle2, pieFill2, pieTitleSize2, pieColorUp, pieColorDown, pieStroke, pieStrokeWidth){
                    const box = d3.select(idContainer).append("svg")
                        .attr("width", widthContainer)
                        .attr("height", heightContainer)
                        .style("color", colorContainer)

                        // set the dimensions and margins of the graph
                        var width = pieWidth
                        height = pieHeight
                        margin = pieMargin
                    
                        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
                        var radius = Math.min(pieWidth, pieHeight) / 2 - pieMargin
                    
                        // append the svg object to the div called 'my_dataviz'
                        const svg = box.append("svg")
                            .attr("x", pieHorizontalPosition)
                            .attr("y", pieVerticalPosition)
                            .append("g")
                            .attr("transform", "translate(" + pieWidth / 2 + "," + pieHeight / 2 + ")")

                        svg.append("text")
                            .attr("x", pieTitleHorizontalPosition)
                            .attr("y", pieTitleVerticalPosition)
                            .text(pieTitle)
                            .attr("class", "badge badge-success")
                            .style("fill", pieFill)
                            .style("font-size", pieTitleSize)
                            .style("text-anchor", "middle")

                        svg.append("text")
                            .attr("x", pieTitleHorizontalPosition2)
                            .attr("y", pieTitleVerticalPosition2)
                            .text(pieTitle2)
                            .style("fill", pieFill2)
                            .style("font-size", pieTitleSize2)
                            .style("text-anchor", "middle")

                    
                        // Create dummy data
                        var data = {a: 78, b: 22}
                    
                        // set the color scale
                        var color = d3.scaleOrdinal()
                            .domain(["a", "b"])
                            .range([pieColorUp,pieColorDown]);
                    
                        // Compute the position of each group on the pie:
                        var pie = d3.pie()
                            .sort(null) // Do not sort group by size
                            .value(function(d) {return d.value; })
                        var data_ready = pie(d3.entries(data))
                    
                        // The arc generator
                        var arc = d3.arc()
                            .innerRadius(radius * 0)         // This is the size of the donut hole
                            .outerRadius(radius * 0.8)
                    
                        // Another arc that won't be drawn. Just for labels positioning
                        var outerArc = d3.arc()
                            .innerRadius(radius * 0.9)
                            .outerRadius(radius * 0.9)
                    
                        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
                        svg
                            .selectAll('allSlices')
                            .data(data_ready)
                            .enter()
                            .append('path')
                            .attr('d', arc)
                            .attr('fill', function(d){ return(color(d.data.key)) })
                            .attr("stroke", pieStroke)
                            .style("stroke-width", pieStrokeWidth)
                            .style("opacity", 0.7)
                }

                const timePie = pieChart("#test", "40%", 500, "white", 500, 450, 40, "20%", 0, 0, 220, "compatibilié", "green", "2em", 0, 250, "Temps Trajet Total", "blue", "2em", "#008000", "blue", "2px")
                const lengthPie = pieChart("#test", "40%", 500, "white", 500, 450, 40, -70, 0, 0, 220, "compatibilié", "green", "2em", 0, 250, "Distance Trajet Total", "blue", "2em", "#008000", "blue", "2px")

                function badge(idContainer, widthContainer, heightContainer, colorContainer, rectHorizontalPosition, recVerticalPosition, rectWidth, rectHeight, rectStrokeWidth, rectStroke, rectFill, rectPicture, rectPictureWidth, rectPictureHeight, rectHorizontalPosition, rectVerticalPosition, titleHorizontalPosition, titleVerticalPosition, title, titleFill, titleSize, scoreHorizontalPosition, scoreVerticalPosition, score, scoreFill, scoreSize, rectHorizontalPosition2, recVerticalPosition2, rectWidth2, rectHeight2, rectStrokeWidth2, rectStroke2, rectFill2, titleHorizontalPosition2, titleVerticalPosition2, title2, titleFill2, titleSize2, textHorizontalPosition, textVerticalPosition, text, textFill, textSize){
                    const svg = d3.select(idContainer).append("svg")
                        .attr("width", widthContainer)
                        .attr("height", heightContainer)
                        .style("color", colorContainer)

                    svg.append("rect")
                        .attr("x", rectHorizontalPosition)
                        .attr("y", recVerticalPosition)
                        .attr("width", rectWidth)
                        .attr("height", rectHeight)
                        .style("stroke-width", rectStrokeWidth)
                        .style("stroke", rectStroke)
                        .style("fill", rectFill)

                    svg.append("text")
                        .attr("x", titleHorizontalPosition)
                        .attr("y", titleVerticalPosition)
                        .text(title)
                        .attr("class", "badge badge-success")
                        .style("fill", titleFill)
                        .style("font-size", titleSize)
                        .style("text-anchor", "middle")

                    svg.append("text")
                        .attr("x", scoreHorizontalPosition)
                        .attr("y", scoreVerticalPosition)
                        .text(score)
                        .attr("class", "badge badge-success")
                        .style("fill", scoreFill)
                        .style("font-size", scoreSize)
                        .style("text-anchor", "middle")

                    svg.append("rect")
                        .attr("x", rectHorizontalPosition2)
                        .attr("y", recVerticalPosition2)
                        .attr("width", rectWidth2)
                        .attr("height", rectHeight2)
                        .style("stroke-width", rectStrokeWidth2)
                        .style("stroke", rectStroke2)
                        .style("fill", rectFill2)

                    svg.append("text")
                        .attr("x", titleHorizontalPosition2)
                        .attr("y", titleVerticalPosition2)
                        .text(title2)
                        .attr("class", "badge badge-success")
                        .style("fill", titleFill2)
                        .style("font-size", titleSize2)
                        .style("text-anchor", "middle")

                    svg.append("text")
                        .attr("x", textHorizontalPosition)
                        .attr("y", textVerticalPosition)
                        .text(text)
                        .attr("class", "badge badge-success")
                        .style("fill", textFill)
                        .style("font-size", textSize)
                        .style("text-anchor", "middle")
                }

        const badgeScore = badge("#test", "45%", 750, "#181818", 0, 50, "100%", 500, "1px", "white", "white", "https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ37m8X0Urzm4J30YgAKqwYWyfzZM99g76L-0XCRAoIH3oOh06n", "100%", "50%", 0, 50, 300, "60  %", "Niveau de compatibilité du véhicule", "black", "2em", "50%", 530, "Score : 85 / 100", "green", "4em", 15, 570, "95%", 80, "1px", "green", "green", 300, 630, "Gain de 2000€/mois", "white", "3.5em", 300, 680, "Retour sur investissement : 36 mois", "white", "1em")

            </script>
    </section>
</body>
</html>