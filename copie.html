<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ellis Electric</title>

    <!--<script src="asset/js/index.js"></script>-->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" href="asset/css/index.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Tangerine">
</head>
<body>
    <header>
        <div class="jumbotron fx col jccenter colorGrey">
            <h1 class="display-4 txtAlignCenter">Convertir ma flotte en électrique</h1>
            <p class="lead txtAlignCenter">Faites des économies, passez à l'électrique !</p>
            <div class="dropdown fx jccenter">
                <div class="dropdown-menu percent50" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">Action</a>
                  <a class="dropdown-item" href="#">Another action</a>
                  <a class="dropdown-item" href="#">Something else here</a>
                </div>
              </div>
          </div>
    </header>
    <section>
        <div id="test"></div>
            <script>

                const box = d3.select("#test").append("svg")
                        .attr("width", 1300)
                        .attr("height", 600)
                        .style("color", "white")

                const widthBox = 2000
                const heightBox = 600

        //Cercles Véhicules

                let fuelCarBoxCircleRadiusPositionX = heightBox * 0.31
                let electricCarBoxCircleRadiusPositionX = heightBox
                let boxCircleRadiusPositionY = heightBox * 0.50
                let boxCircleRadius = heightBox * 0.30

        //Pie Chart

                let pieWidthPattern = widthBox * 0.45
                let pieHeightPattern = heightBox * 0.40
                let timePiePositionPatternX = widthBox * 0.25
                let lengthPiePositionPatternX = widthBox * 0.36
                let piePositionPatternY = heightBox * 0.20

        //Badge Score

                let scorePositionX = widthBox * 0.54
                let scorePositionY = heightBox * 0.65
                let badgeWidth = widthBox * 0.16
                let badgeHeight = heightBox * 0.06
                let badgePositionX = widthBox * 0.46
                let badgePositionY = heightBox * 0.70
                let badgeTextPositionX = widthBox * 0.54
                let badgeTextPositionY = heightBox * 0.75
                let textPositionX = widthBox * 0.54
                let textPositionY = heightBox * 0.80

    
                function drawCircle(circleHorizontalPosition, circleVerticalPosition, circleRadius, circleStrokeWidth, circleStroke, circleFill, backgroundColor, circleTitle, circleText, circleText2, circleText3) {

                    box.append("circle")
                        .attr("cx", circleHorizontalPosition)
                        .attr("cy", circleVerticalPosition)
                        .attr("r", circleRadius)
                        .style("stroke-width", circleStrokeWidth)
                        .style("stroke", circleStroke)
                        .style("fill", circleFill)
    
                    box.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition * 0.8)
                        .text(circleTitle)
                        .attr("class", "badge badge-success")
                        .attr("text-anchor", "middle")
                        .style("fill", circleStroke)
                        .style("font-size", "2em")
                        
                    box.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition)
                        .text(circleText)
                        .attr("text-anchor", "middle")
                        .style("fill", "grey")
                        .style("font-size", "1.5em")
                    
                    box.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition * 1.2)
                        .text(circleText2)
                        .attr("text-anchor", "middle")
                        .style("fill", "grey")
                        .style("font-size", "1.5em")
    
                    box.append("text")
                        .attr("x", circleHorizontalPosition)
                        .attr("y", circleVerticalPosition * 1.4)
                        .text(circleText3)
                        .attr("text-anchor", "middle")
                        .style("fill", "grey")
                        .style("font-size", "1.5em")


                }

                const fuelCar = drawCircle(fuelCarBoxCircleRadiusPositionX, boxCircleRadiusPositionY, boxCircleRadius, 3, "orange", "none", "181818", "Renault Captur", "Essence", "210 000km", "Année 2013") 
                const electricCar = drawCircle(electricCarBoxCircleRadiusPositionX, boxCircleRadiusPositionY, boxCircleRadius, 3, "green", "none", "181818", "Tesla Model S", "50 000€", "Autonomie : 505km", "")

                function badge(rectHorizontalPosition, recVerticalPosition, rectWidth, rectHeight, rectStrokeWidth, rectStroke, rectFill, scoreHorizontalPosition, scoreVerticalPosition, score, scoreFill, scoreSize, recVerticalPosition2, rectHeight2, rectStrokeWidth2, rectStroke2, rectFill2, titleHorizontalPosition2, titleVerticalPosition2, title2, titleFill2, titleSize2, textHorizontalPosition, textVerticalPosition, text, textFill, textSize){

                /*box.append("rect")
                    .attr("x", rectHorizontalPosition)
                    .attr("y", recVerticalPosition)
                    .attr("width", rectWidth)
                    .attr("height", rectHeight)
                    .style("stroke-width", rectStrokeWidth)
                    .style("stroke", rectStroke)
                    .style("fill", rectFill)*/


                box.append("text")
                    .attr("x", scoreHorizontalPosition)
                    .attr("y", scoreVerticalPosition)
                    .text(score)
                    .style("fill", scoreFill)
                    .style("font-size", scoreSize)
                    .style("text-anchor", "middle")

                box.append("rect")
                    .attr("x", rectHorizontalPosition)
                    .attr("y", recVerticalPosition2)
                    .attr("width", rectWidth)
                    .attr("height", rectHeight2)
                    .style("stroke-width", rectStrokeWidth2)
                    .style("stroke", rectStroke2)
                    .style("fill", rectFill2)

                box.append("text")
                    .attr("x", titleHorizontalPosition2)
                    .attr("y", titleVerticalPosition2)
                    .text(title2)
                    .attr("class", "badge badge-success")
                    .style("fill", titleFill2)
                    .style("font-size", titleSize2)
                    .style("text-anchor", "middle")

                box.append("text")
                    .attr("x", textHorizontalPosition)
                    .attr("y", textVerticalPosition)
                    .text(text)
                    .attr("class", "badge badge-success")
                    .style("fill", textFill)
                    .style("font-size", textSize)
                    .style("text-anchor", "middle")
                }

                const badgeScore = badge(badgePositionX, "17%", badgeWidth, "55%", "1px", "#181818", "#181818", scorePositionX, scorePositionY, "Score : 85 / 100", "green", "2em", badgePositionY, badgeHeight, "1px", "green", "green", badgeTextPositionX, badgeTextPositionY, "Gain de 2000€ / mois", "lightgrey", "2em", textPositionX, textPositionY, "Retour sur investissement : 36 mois", "grey", "1em")


                function pieChart(pieWidth, pieHeight, pieMargin, pieHorizontalPosition, pieVerticalPosition, pieColorUp, pieColorDown, pieStroke, pieStrokeWidth){

                        // set the dimensions and margins of the graph
                        var width = pieWidth
                        height = pieHeight
                        margin = pieMargin
                    
                        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
                        var radius = Math.min(pieWidth, pieHeight) / 2 - pieMargin
                    
                        // append the svg object to the div called 'my_dataviz'
                        const svg = box.append("svg")
                            .attr("x", pieHorizontalPosition)
                            .attr("y", pieVerticalPosition)
                            .append("g")
                            .attr("transform", "translate(" + pieWidth / 2 + "," + pieHeight / 2 + ")")
                    
                        // Create dummy data
                        var data = {a: 78, b: 22}
                    
                        // set the color scale
                        var color = d3.scaleOrdinal()
                            .domain(["a", "b"])
                            .range([pieColorUp,pieColorDown]);
                    
                        // Compute the position of each group on the pie:
                        var pie = d3.pie()
                            .sort(null) // Do not sort group by size
                            .value(function(d) {return d.value; })
                        var data_ready = pie(d3.entries(data))
                    
                        // The arc generator
                        var arc = d3.arc()
                            .innerRadius(radius * 0)         // This is the size of the donut hole
                            .outerRadius(radius * 0.8)
                    
                        // Another arc that won't be drawn. Just for labels positioning
                        var outerArc = d3.arc()
                            .innerRadius(radius * 0.9)
                            .outerRadius(radius * 0.9)
                    
                        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
                        svg
                            .selectAll('allSlices')
                            .data(data_ready)
                            .enter()
                            .append('path')
                            .attr('d', arc)
                            .attr('fill', function(d){ return(color(d.data.key)) })
                            .attr("stroke", pieStroke)
                            .style("stroke-width", pieStrokeWidth)
                            .style("opacity", 0.7)
                }

                const timePie = pieChart(pieWidthPattern, pieHeightPattern, 0, timePiePositionPatternX, piePositionPatternY, "#008000", "orange", "2px")
                const lengthPie = pieChart(pieWidthPattern, pieHeightPattern, 0, lengthPiePositionPatternX, piePositionPatternY, "#008000", "orange", "2px")

                
            </script>
    </section>
</body>
</html>